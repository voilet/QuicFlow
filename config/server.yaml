batch:
    enabled: false
    maxconcurrency: 5000
    tasktimeout: 60
    jobtimeout: 600
    maxretries: 2
    retryinterval: 1
database:
    enabled: true
    type: postgres
    host: localhost
    port: 5432
    user: postgres
    password: ""
    dbname: quic_release
    sslmode: disable
    charset: utf8mb4
    automigrate: true
    # GORM 日志级别: silent, error, warn, info
    # silent: 禁用所有日志（生产环境推荐，避免高并发性能问题）
    # error: 仅错误日志
    # warn: 警告和错误日志
    # info: 详细 SQL 日志（开发调试用）
    log_level: silent
    # 连接池配置
    max_idle_conns: 10
    max_open_conns: 100
    conn_max_lifetime: 3600  # 连接最大存活时间（秒），默认 1 小时
log:
    level: info
    format: text
    file: ""
message:
    workercount: 20
    taskqueuesize: 2000
    handlertimeout: 30
    maxpromises: 50000
    promisewarnthreshold: 40000
    defaultmessagetimeout: 30
quic:
    maxidletimeout: 60
    maxincomingstreams: 1000
    maxincomingunistreams: 100
    initialstreamreceivewindow: 524288
    maxstreamreceivewindow: 6291456
    initialconnectionreceivewindow: 1048576
    maxconnectionreceivewindow: 15728640
    # ========== 性能优化配置 ==========
    # 启用 0-RTT (允许客户端在首个 RTT 内发送数据)
    # 可减少重复连接的延迟约 50%，但有重放攻击风险
    # 应用层需要自行处理重放攻击（例如使用 nonce）
    allow_0rtt: true
server:
    addr: :8474
    apiaddr: :8475
    highperf: false
    maxclients: 10000
session:
    heartbeatinterval: 15
    heartbeattimeout: 45
    heartbeatcheckinterval: 5
    maxtimeoutcount: 3
tls:
    certfile: certs/server-cert.pem
    keyfile: certs/server-key.pem
    # ========== TLS 性能优化配置 ==========
    # Session Ticket 密钥（用于会话恢复，减少 TLS 握手开销）
    # 生产环境必须设置！多个密钥用逗号分隔，支持密钥轮换
    # 生成方式: openssl rand -hex 32
    # 建议配置 3 个密钥，支持平滑轮换
    # 例如: session_ticket_keys: "key1,key2,key3"
    # 留空则使用随机密钥（仅用于开发环境）
    session_ticket_keys: ""
    # Session Ticket 密钥轮换间隔（小时）
    # 建议每 24 小时轮换一次
    key_rotation_interval: 24
filetransfer:
    enabled: true
    # 存储根路径
    storage_root: "./data/quic-files"
    # 路径模板，支持变量: {date}, {year}, {month}, {day}, {user}, {project}, {timestamp}
    path_template: "{date}/{user}"
    # 单文件大小限制（字节，0=无限制）
    max_file_size: 10737418240  # 10GB
    # 存储配额（字节）
    storage_quota: 1099511627776  # 1TB
    # 用户配额（字节）
    user_quota: 107374182400  # 100GB
    # 最大并发传输数
    max_concurrent_transfers: 100
    # 传输缓冲区大小（字节）
    buffer_size: 65536  # 64KB
    # 分块大小（字节）
    chunk_size: 1048576  # 1MB
    # 上传线程数
    upload_threads: 4
    # 下载线程数
    download_threads: 4
    # 是否启用压缩
    compression: false
    # 是否校验校验和
    checksum_verify: true
    # 是否支持断点续传
    resume_support: true
    # 保留天数（0=永久）
    retention_days: 30
    # 是否自动清理过期文件
    auto_cleanup: false
    # 临时文件目录
    temp_dir: "/tmp/quic-upload"
