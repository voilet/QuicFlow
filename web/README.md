# QUIC å‘½ä»¤ç®¡ç†ç³»ç»Ÿ - Web å‰ç«¯

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Vue 3 + Element Plus** å¼€å‘çš„ QUIC å‘½ä»¤ç®¡ç†ç³»ç»Ÿå‰ç«¯ç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

1. **å®¢æˆ·ç«¯ç®¡ç†**
   - å®æ—¶æ˜¾ç¤ºåœ¨çº¿å®¢æˆ·ç«¯åˆ—è¡¨
   - æŸ¥çœ‹å®¢æˆ·ç«¯è¿æ¥ä¿¡æ¯å’ŒçŠ¶æ€
   - ç»Ÿè®¡é¢æ¿å±•ç¤ºå…³é”®æŒ‡æ ‡

2. **å‘½ä»¤ä¸‹å‘**
   - å¯è§†åŒ–å‘½ä»¤ä¸‹å‘ç•Œé¢
   - å¤šç§é¢„è®¾å‘½ä»¤æ¨¡æ¿
   - JSON å‚æ•°ç¼–è¾‘å’ŒéªŒè¯
   - å®æ—¶æŸ¥çœ‹å‘½ä»¤æ‰§è¡Œç»“æœ

3. **å‘½ä»¤å†å²**
   - å®Œæ•´çš„å‘½ä»¤æ‰§è¡Œè®°å½•
   - å¤šç»´åº¦ç­›é€‰å’ŒæŸ¥è¯¢
   - å‘½ä»¤çŠ¶æ€å®æ—¶æ›´æ–°
   - å¤±è´¥å‘½ä»¤ä¸€é”®é‡è¯•

### ğŸ¨ UI ç‰¹è‰²

- ğŸ¨ **ç°ä»£åŒ–è®¾è®¡** - åŸºäº Element Plusï¼Œç•Œé¢ç¾è§‚
- ğŸ“± **å“åº”å¼å¸ƒå±€** - é€‚é…å„ç§å±å¹•å°ºå¯¸
- ğŸ”„ **å®æ—¶åˆ·æ–°** - è‡ªåŠ¨æ›´æ–°æ•°æ®çŠ¶æ€
- ğŸ’¡ **æ™ºèƒ½æç¤º** - ä¸°å¯Œçš„æ“ä½œæç¤ºå’Œå¸®åŠ©
- ğŸ“Š **æ•°æ®å¯è§†åŒ–** - ç›´è§‚çš„ç»Ÿè®¡å›¾è¡¨

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16.0.0
- npm >= 8.0.0

### å®‰è£…ä¾èµ–

```bash
cd web
npm install
```

### å¼€å‘æ¨¡å¼

```bash
npm run dev
```

å¯åŠ¨åè®¿é—®ï¼šhttp://localhost:3000

### ç”Ÿäº§æ„å»º

```bash
npm run build
```

æ„å»ºäº§ç‰©ä½äº `dist/` ç›®å½•ã€‚

## é¡¹ç›®ç»“æ„

```
web/
â”œâ”€â”€ index.html              # å…¥å£ HTML
â”œâ”€â”€ package.json            # ä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.js          # Vite é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js             # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ App.vue             # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.js        # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ index.js        # API æ¥å£å°è£…
â”‚   â””â”€â”€ views/
â”‚       â”œâ”€â”€ ClientList.vue  # å®¢æˆ·ç«¯åˆ—è¡¨
â”‚       â”œâ”€â”€ CommandSend.vue # å‘½ä»¤ä¸‹å‘
â”‚       â””â”€â”€ CommandHistory.vue # å‘½ä»¤å†å²
â””â”€â”€ dist/                   # æ„å»ºè¾“å‡ºï¼ˆç”Ÿäº§ï¼‰
```

## é¡µé¢åŠŸèƒ½è¯¦è§£

### 1. å®¢æˆ·ç«¯ç®¡ç†

**è·¯ç”±**: `/`

**åŠŸèƒ½**:
- æ˜¾ç¤ºæ‰€æœ‰åœ¨çº¿å®¢æˆ·ç«¯
- å®æ—¶ç»Ÿè®¡ï¼šåœ¨çº¿æ•°ã€æ€»è¿æ¥æ•°ã€æ¶ˆæ¯æ•°ã€å¹³å‡åœ¨çº¿æ—¶é•¿
- å¿«é€Ÿæ“ä½œï¼šä¸‹å‘å‘½ä»¤ã€æŸ¥çœ‹å†å²
- è‡ªåŠ¨åˆ·æ–°ï¼ˆ10ç§’é—´éš”ï¼‰

**ä½¿ç”¨æ–¹æ³•**:
1. é¡µé¢è‡ªåŠ¨åŠ è½½åœ¨çº¿å®¢æˆ·ç«¯åˆ—è¡¨
2. ç‚¹å‡»"ä¸‹å‘å‘½ä»¤"è·³è½¬åˆ°å‘½ä»¤ä¸‹å‘é¡µé¢
3. ç‚¹å‡»"å‘½ä»¤å†å²"æŸ¥çœ‹è¯¥å®¢æˆ·ç«¯çš„å†å²å‘½ä»¤
4. ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®æ‰‹åŠ¨æ›´æ–°æ•°æ®

### 2. å‘½ä»¤ä¸‹å‘

**è·¯ç”±**: `/command`

**åŠŸèƒ½**:
- é€‰æ‹©ç›®æ ‡å®¢æˆ·ç«¯
- é€‰æ‹©å‘½ä»¤ç±»å‹ï¼ˆrestartã€update_configã€get_statusç­‰ï¼‰
- ç¼–è¾‘ JSON æ ¼å¼çš„å‘½ä»¤å‚æ•°
- è®¾ç½®è¶…æ—¶æ—¶é—´
- ä½¿ç”¨é¢„è®¾å‘½ä»¤æ¨¡æ¿
- æŸ¥çœ‹æœ€è¿‘ä¸‹å‘çš„å‘½ä»¤
- å®æ—¶æŸ¥çœ‹å‘½ä»¤æ‰§è¡Œç»“æœ

**ä½¿ç”¨æ–¹æ³•**:

#### åŸºæœ¬æµç¨‹
1. é€‰æ‹©ç›®æ ‡å®¢æˆ·ç«¯
2. é€‰æ‹©å‘½ä»¤ç±»å‹
3. ç¼–è¾‘å‘½ä»¤å‚æ•°ï¼ˆè‡ªåŠ¨åŠ è½½æ¨¡æ¿ï¼‰
4. è®¾ç½®è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤30ç§’ï¼‰
5. ç‚¹å‡»"ä¸‹å‘å‘½ä»¤"æŒ‰é’®
6. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­æŸ¥çœ‹æ‰§è¡Œç»“æœ

#### ä½¿ç”¨æ¨¡æ¿
1. åœ¨å³ä¾§"å‘½ä»¤æ¨¡æ¿"åŒºåŸŸé€‰æ‹©ä¸€ä¸ªæ¨¡æ¿
2. ç‚¹å‡»"ä½¿ç”¨æ­¤æ¨¡æ¿"æŒ‰é’®
3. å‚æ•°è‡ªåŠ¨å¡«å……åˆ°è¡¨å•ä¸­
4. æ ¹æ®éœ€è¦ä¿®æ”¹å‚æ•°
5. ä¸‹å‘å‘½ä»¤

#### å‘½ä»¤æ¨¡æ¿ç¤ºä¾‹

**é‡å¯æœåŠ¡**:
```json
{
  "delay_seconds": 5
}
```

**æ›´æ–°é…ç½®**:
```json
{
  "config": {
    "log_level": "debug",
    "timeout": 60,
    "max_connections": 1000
  }
}
```

**è·å–çŠ¶æ€**:
```json
{}
```

### 3. å‘½ä»¤å†å²

**è·¯ç”±**: `/history`

**åŠŸèƒ½**:
- æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤æ‰§è¡Œå†å²
- æŒ‰å®¢æˆ·ç«¯IDç­›é€‰
- æŒ‰å‘½ä»¤çŠ¶æ€ç­›é€‰
- å±•å¼€æŸ¥çœ‹å‘½ä»¤è¯¦æƒ…
- é‡è¯•å¤±è´¥çš„å‘½ä»¤
- è‡ªåŠ¨åˆ·æ–°ï¼ˆ15ç§’é—´éš”ï¼‰
- åˆ†é¡µæ˜¾ç¤º

**ä½¿ç”¨æ–¹æ³•**:

#### æŸ¥è¯¢å‘½ä»¤
1. é€‰æ‹©ç­›é€‰æ¡ä»¶ï¼ˆå®¢æˆ·ç«¯IDã€çŠ¶æ€ï¼‰
2. ç‚¹å‡»"æŸ¥è¯¢"æŒ‰é’®
3. æŸ¥çœ‹å‘½ä»¤åˆ—è¡¨

#### æŸ¥çœ‹è¯¦æƒ…
1. ç‚¹å‡»è¡¨æ ¼è¡Œå·¦ä¾§çš„å±•å¼€æŒ‰é’®
2. æˆ–ç‚¹å‡»"è¯¦æƒ…"æŒ‰é’®æ‰“å¼€å¯¹è¯æ¡†
3. æŸ¥çœ‹å®Œæ•´çš„å‘½ä»¤ä¿¡æ¯å’Œæ‰§è¡Œç»“æœ

#### é‡è¯•å‘½ä»¤
1. å¯¹äºå¤±è´¥æˆ–è¶…æ—¶çš„å‘½ä»¤
2. ç‚¹å‡»"é‡è¯•"æŒ‰é’®
3. ç¡®è®¤åé‡æ–°ä¸‹å‘å‘½ä»¤

## API ä»£ç†é…ç½®

å‰ç«¯é€šè¿‡ Vite ä»£ç†è¯·æ±‚åç«¯ APIï¼š

```javascript
// vite.config.js
server: {
  port: 3000,
  proxy: {
    '/api': {
      target: 'http://localhost:8475',  // åç«¯åœ°å€
      changeOrigin: true
    }
  }
}
```

## çŠ¶æ€è¯´æ˜

### å‘½ä»¤çŠ¶æ€

| çŠ¶æ€ | è¯´æ˜ | é¢œè‰² |
|------|------|------|
| pending | å·²ä¸‹å‘ï¼Œç­‰å¾…å®¢æˆ·ç«¯æ‰§è¡Œ | æ©™è‰² |
| executing | å®¢æˆ·ç«¯æ­£åœ¨æ‰§è¡Œ | è“è‰² |
| completed | æ‰§è¡ŒæˆåŠŸ | ç»¿è‰² |
| failed | æ‰§è¡Œå¤±è´¥ | çº¢è‰² |
| timeout | æ‰§è¡Œè¶…æ—¶ | çº¢è‰² |

### å®¢æˆ·ç«¯çŠ¶æ€

| çŠ¶æ€ | è¯´æ˜ | é¢œè‰² |
|------|------|------|
| åœ¨çº¿ | å®¢æˆ·ç«¯å·²è¿æ¥ | ç»¿è‰² |
| ç¦»çº¿ | å®¢æˆ·ç«¯å·²æ–­å¼€ | ç°è‰² |

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„å‘½ä»¤ç±»å‹

1. åœ¨ `CommandSend.vue` ä¸­æ·»åŠ å‘½ä»¤ç±»å‹ï¼š

```javascript
const commandTypes = [
  { label: 'é‡å¯æœåŠ¡', value: 'restart' },
  { label: 'æ›´æ–°é…ç½®', value: 'update_config' },
  { label: 'æ–°å‘½ä»¤', value: 'new_command' },  // æ–°å¢
]
```

2. æ·»åŠ å‘½ä»¤æ¨¡æ¿ï¼š

```javascript
const templates = [
  {
    type: 'new_command',
    name: 'æ–°å‘½ä»¤',
    description: 'æ–°å‘½ä»¤çš„æè¿°',
    payload: { param1: 'value1', param2: 'value2' }
  }
]
```

### è‡ªå®šä¹‰ä¸»é¢˜

ä¿®æ”¹ `App.vue` ä¸­çš„é¢œè‰²å˜é‡ï¼š

```css
.app-aside {
  background: #304156;  /* ä¾§è¾¹æ èƒŒæ™¯ */
}

.logo {
  background: #263445;  /* LogoåŒºåŸŸèƒŒæ™¯ */
}
```

### ä¿®æ”¹åˆ·æ–°é—´éš”

åœ¨å„é¡µé¢çš„ `onMounted` ä¸­ä¿®æ”¹ï¼š

```javascript
// å®¢æˆ·ç«¯åˆ—è¡¨ - 10ç§’åˆ·æ–°
setInterval(loadClients, 10000)

// å‘½ä»¤å†å² - 15ç§’åˆ·æ–°
setInterval(loadCommands, 15000)
```

## æŠ€æœ¯æ ˆ

- **Vue 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **Element Plus** - Vue 3 UI ç»„ä»¶åº“
- **Vue Router** - å®˜æ–¹è·¯ç”±ç®¡ç†å™¨
- **Axios** - HTTP å®¢æˆ·ç«¯
- **Day.js** - è½»é‡çº§æ—¥æœŸå¤„ç†åº“
- **Vite** - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·

## æµè§ˆå™¨æ”¯æŒ

- Chrome >= 87
- Firefox >= 78
- Safari >= 14
- Edge >= 88

## å¸¸è§é—®é¢˜

### Q: å‰ç«¯æ— æ³•è¿æ¥åç«¯ï¼Ÿ

A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼ˆé»˜è®¤ç«¯å£ 8475ï¼‰
2. ä»£ç†é…ç½®æ˜¯å¦æ­£ç¡®ï¼ˆvite.config.jsï¼‰
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### Q: å‘½ä»¤ä¸‹å‘åçœ‹ä¸åˆ°ç»“æœï¼Ÿ

A: å¯èƒ½åŸå› ï¼š
1. å®¢æˆ·ç«¯æœªè¿æ¥
2. å‘½ä»¤æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œç­‰å¾…ä¸€ä¼š
3. ç‚¹å‡»"åˆ·æ–°çŠ¶æ€"æŒ‰é’®æ›´æ–°

### Q: é¡µé¢æ•°æ®ä¸æ›´æ–°ï¼Ÿ

A: è§£å†³æ–¹æ³•ï¼š
1. æ‰‹åŠ¨ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
3. æ£€æŸ¥è‡ªåŠ¨åˆ·æ–°æ˜¯å¦è¢«ç¦ç”¨

## éƒ¨ç½²

### Nginx é…ç½®ç¤ºä¾‹

```nginx
server {
    listen 80;
    server_name your-domain.com;

    root /path/to/web/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api/ {
        proxy_pass http://localhost:8475;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### Docker éƒ¨ç½²

```dockerfile
FROM node:18-alpine as builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹ [åç«¯æ–‡æ¡£](../QUICKSTART_COMMAND.md) æˆ–æäº¤ Issue
